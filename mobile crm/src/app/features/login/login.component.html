<div class="login-container">
    <!-- Animated Background Elements -->
    <div class="bg-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
    </div>

    <div class="login-wrapper">
        <!-- Left Side - Branding -->
        <div class="branding-side">
            <div class="brand-content">
                <div class="logo-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h2>Mobile CRM</h2>
                <p>Your complete mobile repair management solution</p>
                <div class="features-list">
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Track Repairs & Job Sheets</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Manage Customers & Inventory</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Generate Invoices & Reports</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Side - Login Form -->
        <div class="login-card">
            <div class="card-header">
                <h1>Welcome Back</h1>
                <p>Sign in to continue to your dashboard</p>
            </div>

            <div class="alert alert-danger" *ngIf="errorMessage">
                <i class="fas fa-exclamation-triangle"></i>
                <span>{{ errorMessage }}</span>
            </div>

            <!-- Login Form -->
            <form (ngSubmit)="doLogin()" class="login-form" *ngIf="!showForgotPassword">
                <div class="form-group">
                    <label for="username">Username</label>
                    <div class="input-wrapper">
                        <i class="fas fa-user"></i>
                        <input type="text" id="username" [(ngModel)]="username" name="username" required
                            placeholder="Enter your username" autocomplete="username">
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-wrapper">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" [(ngModel)]="password" name="password" required
                            placeholder="Enter your password" autocomplete="current-password">
                    </div>
                </div>



                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox">
                        <span class="checkmark"></span>
                        <span>Remember me</span>
                    </label>
                    <a href="javascript:void(0)" class="forgot-link" (click)="toggleForgotPassword()">Forgot
                        Password?</a>
                </div>

                <button type="submit" class="btn-login" [disabled]="!username || !password || isLoading">
                    <span>{{ isLoading ? 'Signing In...' : 'Sign In' }}</span>
                    <i class="fas fa-arrow-right" *ngIf="!isLoading"></i>
                </button>
            </form>

            <!-- Forgot Password Form -->
            <div class="login-form" *ngIf="showForgotPassword">
                <div class="alert alert-success" *ngIf="resetMessage">
                    <i class="fas fa-check-circle"></i>
                    <span>{{ resetMessage }}</span>
                </div>

                <div class="alert alert-danger" *ngIf="resetError">
                    <i class="fas fa-exclamation-circle"></i>
                    <span>{{ resetError }}</span>
                </div>

                <p style="text-align: center; color: #666; margin-bottom: 20px;">
                    Enter your username, recovery key, and new password to reset.
                </p>

                <form (ngSubmit)="doReset()">
                    <div class="form-group">
                        <label for="reset-username">Username</label>
                        <div class="input-wrapper">
                            <i class="fas fa-user"></i>
                            <input type="text" id="reset-username" [(ngModel)]="username" name="username" required
                                placeholder="Enter your username" autocomplete="username">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="recovery-key">Recovery Key</label>
                        <div class="input-wrapper">
                            <i class="fas fa-key"></i>
                            <input type="password" id="recovery-key" [(ngModel)]="recoveryKey" name="recoveryKey" required
                                placeholder="Enter your recovery key" autocomplete="off">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <div class="input-wrapper">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="new-password" [(ngModel)]="newPassword" name="newPassword"
                                required placeholder="Enter new password (min 6 chars)" autocomplete="new-password">
                        </div>
                    </div>

                    <button type="submit" class="btn-login" [disabled]="!username || !recoveryKey || !newPassword || isLoading">
                        <span>{{ isLoading ? 'Resetting...' : 'Reset Password' }}</span>
                    </button>
                </form>

                <button type="button" class="btn-link" (click)="toggleForgotPassword()"
                    style="width: 100%; margin-top: 15px; background: none; border: none; color: #666; cursor: pointer;">
                    Back to Login
                </button>
            </div>

            <div class="card-footer">
                <p>Secured with <i class="fas fa-shield-alt"></i> enterprise-grade encryption</p>
            </div>
        </div>
    </div>
</div>